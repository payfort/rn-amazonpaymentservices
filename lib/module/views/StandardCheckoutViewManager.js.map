{"version":3,"names":["React","Platform","requireNativeComponent","Text","useEffect","callFortRequest","nativeResponseSelector","ViewManager","StandardCheckoutViewManager","props","isIOS","OS","showStandardCheckoutPage","onSuccess","onFailure","onCancel","requestObject","environment","requestCode","showLoading","showResponsePage","propsDone","returnSuccessParsed","response","responseObject","returnFailureParsed","e","Error","propsAdjustedIOS"],"sources":["StandardCheckoutViewManager.tsx"],"sourcesContent":["import * as React from 'react';\nimport { Platform, requireNativeComponent, Text } from 'react-native';\nimport { useEffect } from 'react';\nimport { callFortRequest } from '../services/callFortRequest';\nimport nativeResponseSelector from '../utils/nativeResponseSelector';\nimport type { standardCheckoutViewProps } from '../types/viewProps';\n\nconst ViewManager = requireNativeComponent('StandardCheckout');\n\nconst StandardCheckoutViewManager: React.FC<standardCheckoutViewProps> = (\n  props\n) => {\n  const isIOS = Platform.OS === 'ios';\n\n  const {\n    showStandardCheckoutPage,\n    onSuccess = () => {},\n    onFailure = () => {},\n    onCancel = () => {},\n    requestObject,\n    environment = 'TEST',\n    requestCode = 0,\n    showLoading = true,\n    showResponsePage = true,\n  } = props;\n\n  const propsDone = requestObject && environment;\n\n  const returnSuccessParsed = (response: any) => {\n    const responseObject = nativeResponseSelector(response);\n    if (onSuccess) {\n      onSuccess(responseObject);\n    }\n  };\n\n  const returnFailureParsed = (response: any) => {\n    const responseObject = nativeResponseSelector(response);\n    if (onFailure) {\n      onFailure(responseObject);\n    }\n  };\n\n  useEffect(() => {\n    if (showStandardCheckoutPage && !isIOS && requestObject) {\n      try {\n        callFortRequest(\n          onSuccess,\n          onFailure,\n          onCancel,\n          requestObject,\n          environment,\n          requestCode,\n          showLoading,\n          showResponsePage\n        );\n      } catch (e) {\n        throw new Error('Error while calling fort request');\n      }\n    }\n    // eslint-disable-next-line\n  }, [showStandardCheckoutPage]);\n\n  const propsAdjustedIOS = {\n    ...props,\n    showLoading: showLoading ? 1 : 0,\n    showResponsePage: showResponsePage ? 1 : 0,\n    onSuccess: returnSuccessParsed,\n    onFailure: returnFailureParsed,\n  };\n  return propsDone ? (\n    showStandardCheckoutPage && isIOS ? (\n      <ViewManager {...propsAdjustedIOS} />\n    ) : null\n  ) : (\n    // @ts-ignore\n    <Text>Request object missing</Text>\n  );\n};\n\nexport default StandardCheckoutViewManager;\n"],"mappings":"AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AACA,SAASC,QAAT,EAAmBC,sBAAnB,EAA2CC,IAA3C,QAAuD,cAAvD;AACA,SAASC,SAAT,QAA0B,OAA1B;AACA,SAASC,eAAT,QAAgC,6BAAhC;AACA,OAAOC,sBAAP,MAAmC,iCAAnC;AAGA,MAAMC,WAAW,GAAGL,sBAAsB,CAAC,kBAAD,CAA1C;;AAEA,MAAMM,2BAAgE,GACpEC,KADuE,IAEpE;EACH,MAAMC,KAAK,GAAGT,QAAQ,CAACU,EAAT,KAAgB,KAA9B;EAEA,MAAM;IACJC,wBADI;IAEJC,SAAS,GAAG,MAAM,CAAE,CAFhB;IAGJC,SAAS,GAAG,MAAM,CAAE,CAHhB;IAIJC,QAAQ,GAAG,MAAM,CAAE,CAJf;IAKJC,aALI;IAMJC,WAAW,GAAG,MANV;IAOJC,WAAW,GAAG,CAPV;IAQJC,WAAW,GAAG,IARV;IASJC,gBAAgB,GAAG;EATf,IAUFX,KAVJ;EAYA,MAAMY,SAAS,GAAGL,aAAa,IAAIC,WAAnC;;EAEA,MAAMK,mBAAmB,GAAIC,QAAD,IAAmB;IAC7C,MAAMC,cAAc,GAAGlB,sBAAsB,CAACiB,QAAD,CAA7C;;IACA,IAAIV,SAAJ,EAAe;MACbA,SAAS,CAACW,cAAD,CAAT;IACD;EACF,CALD;;EAOA,MAAMC,mBAAmB,GAAIF,QAAD,IAAmB;IAC7C,MAAMC,cAAc,GAAGlB,sBAAsB,CAACiB,QAAD,CAA7C;;IACA,IAAIT,SAAJ,EAAe;MACbA,SAAS,CAACU,cAAD,CAAT;IACD;EACF,CALD;;EAOApB,SAAS,CAAC,MAAM;IACd,IAAIQ,wBAAwB,IAAI,CAACF,KAA7B,IAAsCM,aAA1C,EAAyD;MACvD,IAAI;QACFX,eAAe,CACbQ,SADa,EAEbC,SAFa,EAGbC,QAHa,EAIbC,aAJa,EAKbC,WALa,EAMbC,WANa,EAObC,WAPa,EAQbC,gBARa,CAAf;MAUD,CAXD,CAWE,OAAOM,CAAP,EAAU;QACV,MAAM,IAAIC,KAAJ,CAAU,kCAAV,CAAN;MACD;IACF,CAhBa,CAiBd;;EACD,CAlBQ,EAkBN,CAACf,wBAAD,CAlBM,CAAT;EAoBA,MAAMgB,gBAAgB,GAAG,EACvB,GAAGnB,KADoB;IAEvBU,WAAW,EAAEA,WAAW,GAAG,CAAH,GAAO,CAFR;IAGvBC,gBAAgB,EAAEA,gBAAgB,GAAG,CAAH,GAAO,CAHlB;IAIvBP,SAAS,EAAES,mBAJY;IAKvBR,SAAS,EAAEW;EALY,CAAzB;EAOA,OAAOJ,SAAS,GACdT,wBAAwB,IAAIF,KAA5B,gBACE,oBAAC,WAAD,EAAiBkB,gBAAjB,CADF,GAEI,IAHU;EAAA;EAKd;EACA,oBAAC,IAAD,iCANF;AAQD,CApED;;AAsEA,eAAepB,2BAAf"}