{"version":3,"names":["React","Platform","requireNativeComponent","Text","useEffect","callFortRequest","nativeResponseSelector","ViewManager","StandardCheckoutViewManager","props","isIOS","OS","showStandardCheckoutPage","onSuccess","onFailure","onCancel","requestObject","environment","requestCode","showLoading","showResponsePage","propsDone","returnSuccessParsed","response","responseObject","returnFailureParsed","e","Error","propsAdjustedIOS","createElement"],"sources":["StandardCheckoutViewManager.tsx"],"sourcesContent":["import * as React from 'react';\nimport { Platform, requireNativeComponent, Text } from 'react-native';\nimport { useEffect } from 'react';\nimport { callFortRequest } from '../services/callFortRequest';\nimport nativeResponseSelector from '../utils/nativeResponseSelector';\nimport type { standardCheckoutViewProps } from '../types/viewProps';\n\nconst ViewManager = requireNativeComponent('StandardCheckout');\n\nconst StandardCheckoutViewManager: React.FC<standardCheckoutViewProps> = (\n  props\n) => {\n  const isIOS = Platform.OS === 'ios';\n\n  const {\n    showStandardCheckoutPage,\n    onSuccess = () => {},\n    onFailure = () => {},\n    onCancel = () => {},\n    requestObject,\n    environment = 'TEST',\n    requestCode = 0,\n    showLoading = true,\n    showResponsePage = true,\n  } = props;\n\n  const propsDone = requestObject && environment;\n\n  const returnSuccessParsed = (response: any) => {\n    const responseObject = nativeResponseSelector(response);\n    if (onSuccess) {\n      onSuccess(responseObject);\n    }\n  };\n\n  const returnFailureParsed = (response: any) => {\n    const responseObject = nativeResponseSelector(response);\n    if (onFailure) {\n      onFailure(responseObject);\n    }\n  };\n\n  useEffect(() => {\n    if (showStandardCheckoutPage && !isIOS && requestObject) {\n      try {\n        callFortRequest(\n          onSuccess,\n          onFailure,\n          onCancel,\n          requestObject,\n          environment,\n          requestCode,\n          showLoading,\n          showResponsePage\n        );\n      } catch (e) {\n        throw new Error('Error while calling fort request');\n      }\n    }\n    // eslint-disable-next-line\n  }, [showStandardCheckoutPage]);\n\n  const propsAdjustedIOS = {\n    ...props,\n    showLoading: showLoading ? 1 : 0,\n    showResponsePage: showResponsePage ? 1 : 0,\n    onSuccess: returnSuccessParsed,\n    onFailure: returnFailureParsed,\n  };\n  return propsDone ? (\n    showStandardCheckoutPage && isIOS ? (\n      <ViewManager {...propsAdjustedIOS} />\n    ) : null\n  ) : (\n    // @ts-ignore\n    <Text>Request object missing</Text>\n  );\n};\n\nexport default StandardCheckoutViewManager;\n"],"mappings":"AAAA,OAAO,KAAKA,KAAK,MAAM,OAAO;AAC9B,SAASC,QAAQ,EAAEC,sBAAsB,EAAEC,IAAI,QAAQ,cAAc;AACrE,SAASC,SAAS,QAAQ,OAAO;AACjC,SAASC,eAAe,QAAQ,6BAA6B;AAC7D,OAAOC,sBAAsB,MAAM,iCAAiC;AAGpE,MAAMC,WAAW,GAAGL,sBAAsB,CAAC,kBAAkB,CAAC;AAE9D,MAAMM,2BAAgE,GACpEC,KAAK,IACF;EACH,MAAMC,KAAK,GAAGT,QAAQ,CAACU,EAAE,KAAK,KAAK;EAEnC,MAAM;IACJC,wBAAwB;IACxBC,SAAS,GAAGA,CAAA,KAAM,CAAC,CAAC;IACpBC,SAAS,GAAGA,CAAA,KAAM,CAAC,CAAC;IACpBC,QAAQ,GAAGA,CAAA,KAAM,CAAC,CAAC;IACnBC,aAAa;IACbC,WAAW,GAAG,MAAM;IACpBC,WAAW,GAAG,CAAC;IACfC,WAAW,GAAG,IAAI;IAClBC,gBAAgB,GAAG;EACrB,CAAC,GAAGX,KAAK;EAET,MAAMY,SAAS,GAAGL,aAAa,IAAIC,WAAW;EAE9C,MAAMK,mBAAmB,GAAIC,QAAa,IAAK;IAC7C,MAAMC,cAAc,GAAGlB,sBAAsB,CAACiB,QAAQ,CAAC;IACvD,IAAIV,SAAS,EAAE;MACbA,SAAS,CAACW,cAAc,CAAC;IAC3B;EACF,CAAC;EAED,MAAMC,mBAAmB,GAAIF,QAAa,IAAK;IAC7C,MAAMC,cAAc,GAAGlB,sBAAsB,CAACiB,QAAQ,CAAC;IACvD,IAAIT,SAAS,EAAE;MACbA,SAAS,CAACU,cAAc,CAAC;IAC3B;EACF,CAAC;EAEDpB,SAAS,CAAC,MAAM;IACd,IAAIQ,wBAAwB,IAAI,CAACF,KAAK,IAAIM,aAAa,EAAE;MACvD,IAAI;QACFX,eAAe,CACbQ,SAAS,EACTC,SAAS,EACTC,QAAQ,EACRC,aAAa,EACbC,WAAW,EACXC,WAAW,EACXC,WAAW,EACXC,gBACF,CAAC;MACH,CAAC,CAAC,OAAOM,CAAC,EAAE;QACV,MAAM,IAAIC,KAAK,CAAC,kCAAkC,CAAC;MACrD;IACF;IACA;EACF,CAAC,EAAE,CAACf,wBAAwB,CAAC,CAAC;EAE9B,MAAMgB,gBAAgB,GAAG;IACvB,GAAGnB,KAAK;IACRU,WAAW,EAAEA,WAAW,GAAG,CAAC,GAAG,CAAC;IAChCC,gBAAgB,EAAEA,gBAAgB,GAAG,CAAC,GAAG,CAAC;IAC1CP,SAAS,EAAES,mBAAmB;IAC9BR,SAAS,EAAEW;EACb,CAAC;EACD,OAAOJ,SAAS,GACdT,wBAAwB,IAAIF,KAAK,gBAC/BV,KAAA,CAAA6B,aAAA,CAACtB,WAAW,EAAKqB,gBAAmB,CAAC,GACnC,IAAI;EAAA;EAER;EACA5B,KAAA,CAAA6B,aAAA,CAAC1B,IAAI,QAAC,wBAA4B,CACnC;AACH,CAAC;AAED,eAAeK,2BAA2B","ignoreList":[]}